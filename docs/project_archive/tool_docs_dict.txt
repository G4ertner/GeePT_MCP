TOOL_DOCS: dict[str, str] = {
    "clear_target": """Clear target_docking_port, target_vessel, and target_body if set.

Returns:
  Human‑readable status string: 'Cleared target.' or 'No target to clear.'""",
    "compute_burn_time": """Estimate burn time for a given delta-v using current (or specified) thrust and Isp.

When to use:
  - Size burns for warp lead time, node placement, or staging checks.

Args:
  dv_m_s: Desired delta-v in m/s
  environment: 'current' | 'sea_level' | 'vacuum' — controls Isp estimate

Returns:
  JSON with mass, thrust, Isp, burn_time_simple_s and burn_time_tsiolkovsky_s.""",
    "compute_circularize_node": """Propose a circularization node at Ap or Pe.

When to use:
  - Circularize after insertion or cleanup of eccentric orbits.

Args:
  at: 'apoapsis' | 'periapsis'

Returns:
  Proposal: { ut, prograde, normal=0, radial=0, v_now_m_s, v_circ_m_s }.""",
    "compute_ejection_node_to_body": """Coarse ejection burn estimate for an interplanetary transfer to the target body.

When to use:
  - After computing a transfer window, to place the ejection burn.

Args:
  body_name: Target planet
  parking_alt_m: Circular parking orbit altitude (m) around current body
  environment: Isp environment for burn-time followups ('current'|'sea_level'|'vacuum')

Returns:
  Proposal at UT window: { ut, prograde, normal=0, radial=0, v_inf_m_s, time_to_window_s }.""",
    "compute_plane_change_nodes": """Propose plane change burns at next AN/DN relative to target (vessel/body).

When to use:
  - Align inclinations before rendezvous or transfers.

Returns UT and normal delta-v suggestions for AN and DN when available.""",
    "compute_raise_lower_node": """Propose a single‑burn node to raise/lower apoapsis or periapsis to target_alt_m.

Args:
  kind: 'apoapsis' | 'periapsis'
  target_alt_m: Desired altitude above sea level in meters

Returns:
  Proposal: { ut, prograde, normal=0, radial=0, v_now_m_s, v_target_m_s }.""",
    "compute_rendezvous_phase_node": """Suggest a phasing orbit to rendezvous with the current target vessel in the same SOI.

When to use:
  - Align orbital periods to time an intercept with a target vessel.

Returns:
  Proposal at next Pe: { ut, prograde, normal=0, radial=0, P_phase_s, m, T_align_s }.""",
    "compute_transfer_window_to_body": """Compute a Hohmann transfer window to a target body (moon or interplanetary).

When to use:
  - Time interplanetary or moon transfers from current body context.

Returns phase_now/required/error, time_to_window_s, ut_window, and transfer time.
Robust fallbacks infer the star/common parent when parent references are missing.""",
    "delete_maneuver_nodes": """Remove all maneuver nodes for the active vessel.

When to use:
  - Cleanup after executing nodes or starting a new plan.

Returns:
  Human‑readable status string with count removed.""",
    "get_action_groups_status": """Action group toggles.

When to use:
  - Verify control safety and configuration pre‑burn or pre‑entry.

Returns:
  JSON: { sas, rcs, lights, gear, brakes, abort, custom_1..custom_10 }.""",
    "get_aero_status": """Aerodynamic state.

When to use:
  - Ascent/descent control, max-Q checks, aero stress monitoring.

Returns:
  JSON: { dynamic_pressure_pa, mach, atmosphere_density_kg_m3, drag?, lift? }.""",
    "get_attitude_status": """Attitude/control state for the active vessel.

When to use:
  - Verify SAS/RCS/throttle state and autopilot targets before burns.

Returns:
  JSON: { sas, sas_mode, rcs, throttle, autopilot_state, autopilot_target_pitch,
  autopilot_target_heading, autopilot_target_roll }.""",
    "get_blueprint_ascii": """Compact ASCII schematic/summary of the current vessel by stage.

Includes a header and a per-stage table with engine counts, Δv, TWR,
and key part category counts (Eng/Tank/Dec/Par/Dock).""",
    "get_camera_status": """Active camera parameters when available: mode, pitch, heading, distance, and limits.

Returns:
  JSON: { available, mode?, pitch_deg?, heading_deg?, distance_m?,
  min_pitch_deg?, max_pitch_deg?, min_distance_m?, max_distance_m? }.""",
    "get_diagnostics": """Collect a richer diagnostics snapshot to aid post-mortems.

Returns JSON with: vessel, time, environment, flight, orbit, attitude,
aero, engines, resources, maneuver_nodes, and surface.""",
    "get_engine_status": """Per-engine status for the active vessel.

When to use:
  - Engine diagnostics before/after burns, checking flameouts or throttling.

Returns:
  JSON array of engines with: { part, active, has_fuel, flameout, thrust_n,
  max_thrust_n, specific_impulse_s, throttle }.""",
    "get_environment_info": """Environment info for the current body and situation.

When to use:
  - Context for aerodynamics, entry/landing planning, and surface ops.

Args:
  address: LAN IP/hostname of the KSP PC
  rpc_port: kRPC RPC port (default 50000)
  stream_port: kRPC stream port (default 50001)
  name: Optional connection name shown in kRPC UI
  timeout: Connection timeout in seconds

Returns:
  JSON: { body, in_atmosphere, surface_gravity_m_s2, biome?, static_pressure_pa?,
  temperature_k?, atmosphere, atmosphere_depth_m }.""",
    "get_flight_snapshot": """Flight snapshot for the active vessel.

When to use:
  - Real-time monitoring, ascent/descent guidance, atmosphere checks.

Returns:
  JSON: { altitude_sea_level_m, altitude_terrain_m, vertical_speed_m_s,
  speed_surface_m_s, speed_horizontal_m_s, dynamic_pressure_pa, mach,
  g_force, angle_of_attack_deg, pitch_deg, roll_deg, heading_deg }.""",
    "get_navigation_info": """Coarse navigation info to the current target (body or vessel).

When to use:
  - Pre‑planning checks for plane changes, phasing, and transfers.

Returns:
  If body target: { target_type: 'body', name, target_sma_m, target_period_s,
  target_inclination_deg, target_lan_deg, phase_angle_deg? }.
  If vessel target: { target_type: 'vessel', name, distance_m?, relative_speed_m_s?,
  relative_inclination_deg?, phase_angle_deg? }.""",
    "get_orbit_info": """Orbital elements for the active vessel.

When to use:
  - Planning nodes, verifying orbit changes, or summarizing current orbit.

Returns:
  JSON: { body, apoapsis_altitude_m, time_to_apoapsis_s, periapsis_altitude_m,
  time_to_periapsis_s, eccentricity, inclination_deg, lan_deg,
  argument_of_periapsis_deg, semi_major_axis_m, period_s }.""",
    "get_part_tree": """Hierarchical part tree with staging and module/resource summaries.

Note:
  This synchronous call can exceed the CLI's 60 s limit on large vessels.
  Prefer start_part_tree_job -> get_job_status(job_id) -> read_resource(result_resource)
  when you need a full tree safely; fall back to this direct call only for quick checks.

Returns:
  JSON: { parts: [ { id, title, name, tag?, stage, decouple_stage?, parent_id?, children_ids[],
          modules: [...], resources: {R:{amount,max}}, crossfeed? } ] }""",
    "get_power_status": """ElectricCharge summary with generator/consumer counts and best‑effort estimates.

When to use:
  - Power budgeting, troubleshooting brown‑outs, and mission readiness checks.

Returns:
  JSON: { vessel_totals: { amount, max }, production: { solar?, rtg?, fuel_cells? },
  consumers: { wheels?, antennas?, lights? }, notes?: [..] }.""",
    "get_resource_breakdown": """Aggregate resource totals for the whole vessel and the current stage.

When to use:
  - Fuel/electricity accounting, staging decisions, consumables monitoring.

Returns:
  JSON: { vessel_totals: {Resource: {amount, max}}, stage_totals: {…}, current_stage }.""",
    "get_stage_plan": """Approximate stock‑like staging plan by grouping decouple‑only stages under the
preceding engine stage.

Note:
  For big rockets this direct call can exceed the 60 s CLI limit. Prefer
  start_stage_plan_job -> get_job_status(job_id) -> read_resource(result_resource)
  to fetch the JSON artifact safely, and reserve this helper for quick snapshots.

When to use:
  - Match KSP’s staging view for Δv/TWR per engine stage.

Args:
  environment: 'current' | 'sea_level' | 'vacuum' — controls Isp used

Returns:
  JSON: { stages: [ { stage, engines, max_thrust_n, combined_isp_s?, prop_mass_kg,
  m0_kg, m1_kg, delta_v_m_s?, twr_surface? } ] }.""",
    "get_staging_info": """Approximate per-stage delta‑v and TWR plan using current engine Isp and resource masses.

When to use:
  - Quick staging analysis for mission planning and sanity checks.

Returns:
  JSON: { current_stage, stages: [ { stage, engines, max_thrust_n,
  combined_isp_s?, delta_v_m_s?, twr_surface?, prop_mass_kg, m0_kg, m1_kg } ] }.

Note: Uses standard KSP resource densities and current environment Isp; results are estimates.""",
    "get_status_overview": """Combined snapshot of core vessel/game status in a single call.

When to use:
  - Summarize state for planning, logging, or sanity checks.

Returns:
  JSON: { vessel, environment, flight, orbit, time, attitude, aero, maneuver_nodes }.""",
    "get_surface_info": """Surface context at current location: latitude/longitude, surface altitude, terrain height,
estimated ground slope, and ground speed.

Returns:
  JSON: { latitude_deg, longitude_deg, surface_altitude_m, terrain_height_m,
  slope_deg, ground_speed_m_s, body }.""",
    "get_targeting_info": """Current target summary across vessel/body/docking targets with relative geometry when available.

Returns:
  JSON: { target_type: 'vessel'|'body'|'docking_port'|None, target_name, target_vessel?,
  distance_m?, relative_speed_m_s? }.""",
    "get_time_status": """Time context for the current save.

When to use:
  - Scheduling burns, warp decisions, or synchronizing UT across tools.

Returns:
  JSON: { universal_time_s, mission_time_s }.""",
    "get_vessel_blueprint": """Idealized vessel blueprint combining meta, stage plan, engines, control capabilities, and part tree.

When to use:
  - Give the agent a structural understanding of the craft before writing scripts.

Returns:
  JSON with sections: meta, stages, engines, control_capabilities, parts, geometry, notes.""",
    "get_vessel_info": """Basic vessel info for the active craft.

When to use:
  - High-level status summaries and sanity checks prior to planning.

Args:
  address: LAN IP/hostname of the KSP PC
  rpc_port: kRPC RPC port (default 50000)
  stream_port: kRPC stream port (default 50001)
  name: Optional connection name shown in kRPC UI
  timeout: Connection timeout in seconds

Returns:
  JSON string: { name, mass_kg, throttle, situation }""",
    "krpc_get_status": """Connect to a running kRPC server and return its version (and active vessel if available).

When to use:
    - Quick connectivity check and basic context before calling other tools.

Args:
    address: LAN IP or hostname of the KSP PC
    rpc_port: RPC port (default 50000)
    stream_port: Stream port (default 50001)
    name: Optional connection name shown in kRPC UI
    timeout: Connection timeout in seconds
Returns:
    A short status string, or an error message if connection fails.""",
    "launch_vessel": """Launch a saved vessel (.craft) to a site via SpaceCenter.launch_vessel.

Args:
  craft_directory: "VAB" or "SPH"
  name: Craft filename without ".craft" (must exist in the save's Ships/<dir> folder)
  launch_site: "LaunchPad" or "Runway"
  recover: If true, recover an existing vessel on the site before launch
  crew: Optional list of Kerbal names to assign
  flag_url: Optional asset URL for mission flag

Returns JSON: { ok, active_vessel?, error? }.""",
    "list_bodies": """List celestial bodies known to kRPC with key metadata.

When to use:
  - Pick targets for transfers; validate body names.

Returns:
  JSON array: { name, parent?, has_atmosphere, radius_m, soi_radius_m }.""",
    "list_docking_ports": """List docking ports on the active vessel and their states.

Returns:
  JSON array: { part, state, ready, dockee }.""",
    "list_launch_sites": """List available launch sites (e.g., "LaunchPad", "Runway").""",
    "list_launchable_vessels": """List the names of craft files that can be launched from the specified directory ("VAB" or "SPH").""",
    "list_maneuver_nodes": """List basic maneuver nodes.

When to use:
  - Quick overview of planned burns with timing and total delta‑v.

Returns:
  JSON array: { ut, time_to_node_s, delta_v_m_s }.""",
    "list_maneuver_nodes_detailed": """Detailed maneuver nodes for the active vessel including vector and simple burn-time estimate.

Returns:
  JSON array: { ut, time_to_node_s, delta_v_vector_m_s, delta_v_total_m_s,
  burn_time_simple_s? }.""",
    "list_vessels": """List vessels in the current save with type/situation and optional distance.

Returns:
  JSON array: { name, type?, situation?, distance_m? }.""",
    "list_waypoints": """Waypoints known to the waypoint manager, with vessel-relative range/bearing where possible.

Returns:
  JSON array: { name, body, latitude_deg, longitude_deg, altitude_m,
  distance_m?, bearing_deg? }.""",
    "load_llm_checkpoint": """Load a previously saved checkpoint by name using SpaceCenter.load(name).

Safeguards:
  - By default, only loads names starting with "LLM_" (set require_llm_prefix=false to override).

Returns JSON: { ok, loaded?: save_name, error? }.""",
    "quickload": """Load from the quicksave slot (SpaceCenter.quickload()).

Notes:
  - Prefer load_llm_checkpoint for named saves to avoid conflict with a player's quicksave.""",
    "quicksave": """Save a quicksave (SpaceCenter.quicksave()).

Notes:
  - This overwrites the game's single quicksave slot. Prefer save_llm_checkpoint to create namespaced saves.""",
    "revert_to_launch": """Revert the current flight to launch (KSP's Revert to Launch).

When to use:
  - Reset a mission after a failed ascent or test, returning the rocket to the launch pad.

Notes:
  - This calls SpaceCenter.revert_to_launch(). If revert is disabled or not available in the current scene,
    returns a message indicating it cannot revert.""",
    "save_llm_checkpoint": """Save a game checkpoint under a unique LLM-namespaced name.

Behavior:
  - Generates a unique save name like: "<prefix>_YYYYmmddTHHMMSSZ_<id>".
  - Uses SpaceCenter.save(name) instead of quicksave() to avoid overwriting the user's quicksave.

Args:
  tag: Optional label included in the generated name for readability.
  prefix: Namespace prefix (default "LLM").

Returns JSON: { ok, save_name, note? }.""",
    "set_maneuver_node": """Create a maneuver node at a specific UT with given vector components.

When to use:
  - Apply a proposed burn from compute_* helpers to the game.

Args:
  ut: Universal time for the node
  prograde: Prograde component (m/s)
  normal: Normal component (m/s)
  radial: Radial component (m/s)

Returns:
  JSON echo of the created node parameters.""",
    "set_target_body": """Set the active vessel's target body (also tries SpaceCenter.target_body).

Args:
  body_name: Exact body name (e.g., 'Mun')

Returns:
  Human‑readable status string or an error if not found.""",
    "set_target_vessel": """Set the active vessel's target vessel by name (case‑insensitive). Chooses nearest if multiple.
Also attempts to set SpaceCenter.target_vessel.

Args:
  vessel_name: Exact or case‑insensitive vessel name

Returns:
  Human‑readable status string or error if not found.""",
    "update_maneuver_node": """Edit an existing maneuver node (default: first node).

Args:
  node_index: 0‑based index (default: 0)
  ut/prograde/normal/radial: Components to update (None to leave unchanged)

Returns:
  JSON echo of the updated node: { index, ut, prograde, normal, radial }.""",
    "warp_to": """Best‑effort warp‑to.

When to use:
  - Warp to a node or event time with optional lead time.

Args:
  ut: Target universal time to arrive at
  lead_time_s: Seconds to arrive before UT (e.g., half burn time)

Returns:
  Human‑readable status string, or a message if unsupported.""",
}
